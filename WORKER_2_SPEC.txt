WORKER 2: Child Traversal Consolidation

TASK: Consolidate 3 different child/descendant traversal loops into unified helpers

COMPLETION CRITERIA:
1. Create get_children() near line 146 (replace get_unfinished_children):

get_children() {
    local manager_id="$1"
    local filter="${2:-all}"  # all|unfinished|running|waiting|complete
    local children=""

    for agent_dir in "$AGENTS_DIR"/*/; do
        [[ -d "$agent_dir" ]] || continue
        local child_id=$(basename "$agent_dir")
        [[ -f "$agent_dir/meta.json" ]] || continue

        local manager=$(jq -r '.manager // ""' "$agent_dir/meta.json" 2>/dev/null)
        if [[ "$manager" == "$manager_id" ]]; then
            # Apply filter
            if [[ "$filter" == "all" ]]; then
                children="$children $child_id"
            elif [[ "$filter" == "unfinished" ]]; then
                local state=$(get_state "$child_id")
                if [[ "$state" == "running" || "$state" == "waiting" || "$state" == "complete" ]]; then
                    children="$children $child_id"
                fi
            fi
        fi
    done

    echo "${children# }"  # trim leading space
}

2. Create get_descendants_recursive() below get_children():

get_descendants_recursive() {
    local manager_id="$1"
    echo "$manager_id"  # Include manager itself

    local children=$(get_children "$manager_id" "all")
    for child in $children; do
        get_descendants_recursive "$child"  # Recursive call
    done
}

3. Update get_unfinished_children() to use get_children:

get_unfinished_children() {
    local manager_id="$1"
    get_children "$manager_id" "unfinished"
}

4. Update cmd_nuke child counting (lines 2813-2820):

Replace:
  local child_count=0
  for agent_dir in "$AGENTS_DIR"/*/; do
      ...
      ((child_count++))
  done

With:
  local children=$(get_children "$TARGET_ID" "all")
  local child_count=$(echo "$children" | wc -w | tr -d ' ')

5. Update cmd_nuke get_descendants (lines 2832-2852):

Replace entire local function with:
  local agents_to_kill=($(get_descendants_recursive "$TARGET_ID"))

TEST PLAN:
1. ib new-agent --name mgr "WAITING"
2. ib new-agent --manager mgr --worker --name w1 "WAITING"
3. ib new-agent --manager mgr --worker --name w2 "WAITING"
4. ib list --manager mgr (verify shows w1, w2)
5. ib nuke mgr --force (should kill all 3)
6. ib list (verify all gone)

WHEN DONE: Say "I HAVE COMPLETED THE GOAL"
